"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LastScriptExecution = void 0;
const core_1 = require("@serenity-js/core");
const abilities_1 = require("../abilities");
/**
 * Uses the {@apilink Actor|actor's} {@apilink Ability|ability} to {@apilink BrowseTheWeb} to retrieve
 * a returns the result of the last script executed via {@apilink ExecuteScript}.
 *
 * ## Executing a script and reading the result
 *
 * ```ts
 * import { actorCalled } from '@serenity-js/core'
 * import { ExecuteScript, LastScriptExecution } from '@serenity-js/web'
 * import { Ensure, includes } from '@serenity-js/assertions'
 *
 * await actorCalled('Joseph')
 *   .attemptsTo(
 *     ExecuteScript.sync(() => navigator.userAgent),
 *     Ensure.that(LastScriptExecution.result<string>(), includes('Chrome')),
 *   )
 * ```
 *
 * ## Using LastScriptExecution as {@apilink QuestionAdapter}
 *
 * ```ts
 * import { actorCalled } from '@serenity-js/core'
 * import { ExecuteScript, LastScriptExecution } from '@serenity-js/web'
 * import { Ensure, includes } from '@serenity-js/assertions'
 *
 * await actorCalled('Joseph')
 *   .attemptsTo(
 *     ExecuteScript.sync(() => navigator.userAgent),
 *     Ensure.that(
 *       LastScriptExecution.result<string>().toLocaleLowerCase(),
 *       includes('chrome')
 *     ),
 *   )
 * ```
 *
 * ## Learn more
 * - {@apilink ExecuteScript}
 * - {@apilink BrowseTheWeb}
 * - {@apilink QuestionAdapter}
 *
 * @group Questions
 */
class LastScriptExecution {
    /**
     * Enables asserting on the result of a function executed via {@apilink ExecuteScript}.
     */
    static result() {
        return core_1.Question.about(`last script execution result`, async (actor) => {
            const page = await abilities_1.BrowseTheWeb.as(actor).currentPage();
            return page.lastScriptExecutionResult();
        });
    }
}
exports.LastScriptExecution = LastScriptExecution;
//# sourceMappingURL=LastScriptExecution.js.map