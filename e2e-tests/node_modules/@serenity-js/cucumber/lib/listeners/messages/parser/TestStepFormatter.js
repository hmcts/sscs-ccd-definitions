"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TestStepFormatter = void 0;
const Table = require("cli-table3");
/**
 * @package
 */
class TestStepFormatter {
    format(keyword, text = '', argument) {
        return [
            // 'Given ', 'When ' and 'Then ' steps end with a space in all the supported languages - https://github.com/cucumber/gherkin/blob/fb263beaa86dd371f073277b0cc42604a82c510b/gherkin-languages.json
            // 'Before' does not have a trailing space
            keyword.endsWith(' ') || text === ''
                ? keyword
                : `${keyword}: `,
            text,
            argument && this.formatStepArgument(argument),
        ].join('').trim();
    }
    formatStepArgument(argument) {
        if (argument.docString) {
            return this.formatDocString(argument.docString);
        }
        if (argument.dataTable) {
            return this.formatDataTable(argument.dataTable);
        }
        return '';
    }
    formatDocString(docString) {
        return `\n${docString.content}`;
    }
    formatDataTable(dataTable) {
        const table = new Table({
            chars: {
                bottom: '',
                'bottom-left': '',
                'bottom-mid': '',
                'bottom-right': '',
                left: '|',
                'left-mid': '',
                mid: '',
                'mid-mid': '',
                middle: '|',
                right: '|',
                'right-mid': '',
                top: '',
                'top-left': '',
                'top-mid': '',
                'top-right': '',
            },
            style: {
                border: [],
                'padding-left': 1,
                'padding-right': 1,
            },
        });
        const rows = dataTable.rows.map(row => row.cells.map(cell => cell.value.replace(/\\\\/g, '\\\\\\\\').replace(/\\n/g, '\\\\n')));
        table.push(...rows);
        return `\n${table.toString()}`;
    }
}
exports.TestStepFormatter = TestStepFormatter;
//# sourceMappingURL=TestStepFormatter.js.map